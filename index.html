<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>モノクロ盤面ゲーム</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #board {
            position: relative;
            width: 1000px;
            height: 1000px;
            display: grid;
            grid-template-columns: repeat(100, 10px);
            grid-template-rows: repeat(100, 10px);
            border: 10px solid black;
        }
        .cell {
            width: 10px;
            height: 10px;
            border: 1px solid #d3d3d3;
            box-sizing: border-box;
        }
        .dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: black;
            border-radius: 2px;
        }
        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
        }
    </style>
</head>
<body>
    <div id="board"></div>
    <div id="controls">
        <button id="startButton">開始</button>
        <button id="stopButton">停止</button>
        <button id="resetButton">リセット</button>
    </div>

    <script>
        const board = document.getElementById('board');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const resetButton = document.getElementById('resetButton');

        const numDots = 10;
        const gridSize = 100;
        const dotSize = 10;

        let dots = [];
        let interval;
        let running = false;

        // 点の初期化
        function createDots() {
            dots = [];
            for (let i = 0; i < numDots; i++) {
                const dot = {
                    x: Math.floor(Math.random() * gridSize),
                    y: Math.floor(Math.random() * gridSize),
                    dx: (Math.random() * 30 + 20), // 20～50マス/秒
                    dy: (Math.random() * 30 + 20),
                };
                dots.push(dot);
                const dotElement = document.createElement('div');
                dotElement.classList.add('dot');
                board.appendChild(dotElement);
                dot.element = dotElement;
            }
        }

        // マス目の生成
        function createBoard() {
            for (let i = 0; i < gridSize * gridSize; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                board.appendChild(cell);
            }
        }

        // 点の更新
        function updateDots() {
            dots.forEach(dot => {
                // 移動
                dot.x += dot.dx / 60;
                dot.y += dot.dy / 60;

                // 反射処理
                if (dot.x >= gridSize || dot.x < 0) {
                    dot.dx = -dot.dx;
                }
                if (dot.y >= gridSize || dot.y < 0) {
                    dot.dy = -dot.dy;
                }

                // 点の位置更新
                dot.element.style.left = `${dot.x * dotSize}px`;
                dot.element.style.top = `${dot.y * dotSize}px`;
            });
        }

        // スタートボタンのクリック処理
        startButton.addEventListener('click', () => {
            if (!running) {
                running = true;
                interval = setInterval(updateDots, 1000 / 60); // 60FPS
            }
        });

        // ストップボタンのクリック処理
        stopButton.addEventListener('click', () => {
            if (running) {
                running = false;
                clearInterval(interval);
            }
        });

        // リセットボタンのクリック処理
        resetButton.addEventListener('click', () => {
            clearInterval(interval);
            running = false;
            board.innerHTML = '';
            createBoard();
            createDots();
        });

        // 1分ごとの自動リセット
        setInterval(() => {
            resetButton.click();
        }, 60000);

        // 初期化
        createBoard();
        createDots();
    </script>
</body>
</html>
